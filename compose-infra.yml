services:
  caddy:
    image: caddy
    container_name: caddy
    restart: unless-stopped
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile
      - /opt/infra-data:/data:rw
      - /opt/infra-data:/data:rw
    ports:
      - 80:80
      - 443:443
    environment:
      - DOMAIN=${DOMAIN_NAME}
    networks:
      - staging
      - prod

networks:
  staging:
    name: staging
    external: false
  prod:
    name: prod
    external: false
